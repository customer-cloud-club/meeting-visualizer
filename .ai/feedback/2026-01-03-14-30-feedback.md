# フィードバック

- **日時**: 2026-01-03 14:30
- **内容**: コンテナのヘルスチェックが不明になっている（ECSタスクのヘルスステータスが「不明」と表示される）
- **緊急度**: 中
- **分類**: architecture
- **状態**: 対応済み

## 対応メモ

ECSタスク定義のヘルスチェック設定を確認する必要がある。
最近のコミット（093f64f）でコンテナヘルスチェックを削除し、ALBヘルスチェックのみに変更した影響の可能性あり。

### 背景
- タスクは「実行中」ステータスだが、ヘルスステータスが「不明」
- ALBのヘルスチェックは機能しているがECSコンソール上で表示されない

### 調査項目
1. ECSタスク定義のhealthCheck設定確認
2. ALBターゲットグループのヘルスチェック設定確認
3. コンテナ内の/api/healthエンドポイント確認

### 対応完了 (2026-01-04)

ECSタスク定義にヘルスチェックを再設定:

```json
{
  "healthCheck": {
    "command": ["CMD-SHELL", "wget --quiet --tries=1 --spider http://localhost:3000/api/health || exit 1"],
    "interval": 30,
    "timeout": 5,
    "retries": 3,
    "startPeriod": 60
  }
}
```

確認結果:
- ECSサービス: runningCount=1, healthCheckGracePeriodSeconds=120
- タスクステータス: RUNNING, HEALTHY
