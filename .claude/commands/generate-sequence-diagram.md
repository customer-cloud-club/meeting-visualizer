---
description: ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’è‡ªå‹•ç”Ÿæˆï¼ˆCMD-003ï¼‰
---

# Generate Sequence Diagram Command

CCAGI SDK Phase 2 ã‚³ãƒãƒ³ãƒ‰ (CMD-003)

## âš ï¸ SWMLãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æŒ‡ç¤ºï¼ˆå¿…é ˆï¼‰

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹éš›ã€**å¿…ãš**ä»¥ä¸‹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«å¾“ã£ã¦ãã ã•ã„ï¼š

```
ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¯ã€æœ€å¤§92%
ãã®ãŸã‚ã«åŠ¹ç‡ã‚ˆãä¸¦åˆ—å‡¦ç†
å¿…ãšã€å¿…ãšã€å¿…ãšã€miyabi ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã«å¾“ã£ã¦ã€ã‚¿ã‚¹ã‚¯åˆ†è§£ã—ã¦è¨ˆç”»ã€ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
ã“ã®ãƒã‚¹ã‚¿ãƒ¼Issueã€ã“ã®ãƒã‚¹ã‚¿ãƒ¼ã‚¿ã‚¹ã‚¯ã‚’ã‚¿ã‚¹ã‚¯åˆ†è§£ã€åˆ†è§£ãƒãƒ©ãƒãƒ©ã«ã—ã¡ã‚ƒã£ã¦ã€ã‚¢ã‚µã‚¤ãƒ³ã§ãã‚‹çŠ¶æ…‹ã§ã‚µãƒ–Issuesã«åˆ†å‰²ã—ã¦ãã ã•ã„ã€‚
åˆ†å‰²ã—ãŸã‚‰ã€ç›®çš„ã‚’é”æˆã™ã‚‹ã¾ã§ã€ä½œæ¥­ã‚’ã²ãŸã™ã‚‰ç¶šã‘ã¦ãã ã•ã„

å®Œäº†ã—ãŸIssueã¯ã‚¯ãƒ­ãƒ¼ã‚ºã—ã¦ãã ã•ã„
```

**SWMLãƒ•ãƒ­ãƒ¼**: Î¸â‚ Understand â†’ Î¸â‚‚ Generate â†’ Î¸â‚ƒ Allocate â†’ Î¸â‚„ Execute â†’ Î¸â‚… Integrate â†’ Î¸â‚† Learn

---

è¦ä»¶å®šç¾©ã‹ã‚‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

## ä½¿ç”¨æ–¹æ³•

```bash
/generate-sequence-diagram [path]
```

## ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

- `path` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): è¿½åŠ ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹
  - æ—¢å­˜ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
  - APIä»•æ§˜æ›¸
  - è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```mermaid
graph TD
    A[/generate-sequence-diagram] --> B[Î¸â‚ è¦ä»¶èª­ã¿è¾¼ã¿]
    B --> C[Î¸â‚‚ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡º]
    C --> D[Î¸â‚ƒ ã‚¢ã‚¯ã‚¿ãƒ¼ãƒ»ã‚·ã‚¹ãƒ†ãƒ ç‰¹å®š]
    D --> E[Î¸â‚„ Mermaidç”Ÿæˆ]
    E --> F[Î¸â‚… æ•´åˆæ€§æ¤œè¨¼]
    F --> G[Î¸â‚† å‡ºåŠ›ãƒ»å­¦ç¿’]
    G --> H[${DIAGRAMS}/sequence.md]
```

## å‡ºåŠ›å…ˆ

```
docs/diagrams/sequence.md
```

## å‰ææ¡ä»¶

```
ä¾å­˜é–¢ä¿‚: CMD-001 â†’ CMD-003
```

## å®Ÿè¡Œä¾‹

```bash
/generate-sequence-diagram
```

**æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›**:

```
ğŸ“Š CCAGI Sequence Diagram Generator (CMD-003)

Phase 2: Design - Sequence Diagrams
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Î¸â‚ Understanding...
   âœ… è¦ä»¶ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿: 5ãƒ•ã‚¡ã‚¤ãƒ«
   ğŸ” ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹æ¤œå‡º: 12ä»¶

Î¸â‚‚ Generating...
   âœ… ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³æŠ½å‡º: 45ä»¶
   ğŸ”„ ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ãƒ•ãƒ­ãƒ¼æ§‹ç¯‰ä¸­...

Î¸â‚ƒ Allocating...
   âœ… ã‚¢ã‚¯ã‚¿ãƒ¼: User, Admin, System
   âœ… ã‚µãƒ¼ãƒ“ã‚¹: Auth, API, Database

Î¸â‚„ Executing...
   ğŸ“Š SD-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ•ãƒ­ãƒ¼
   ğŸ“Š SD-002: ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
   ğŸ“Š SD-003: æ›´æ–°å‡¦ç†ãƒ•ãƒ­ãƒ¼
   ...

Î¸â‚… Integrating...
   âœ… è¦ä»¶ã‚«ãƒãƒ¬ãƒƒã‚¸: 100%
   âœ… æ•´åˆæ€§: PASS

Î¸â‚† Learning...
   ğŸ“Š ãƒ‘ã‚¿ãƒ¼ãƒ³å­¦ç¿’å®Œäº†

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Sequence Diagrams Generated

å‡ºåŠ›: docs/diagrams/sequence.md
å›³æ•°: 12
å®Ÿè¡Œæ™‚é–“: 30s

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:
  /generate-architecture-diagram  # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
  /generate-dataflow-diagram      # ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³
```

## å‡ºåŠ›å½¢å¼

### sequence.md

````markdown
# ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³

## SD-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as User
    participant FE as Frontend
    participant API as API Server
    participant DB as Database

    U->>FE: ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±å…¥åŠ›
    FE->>API: POST /auth/login
    API->>DB: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œè¨¼
    DB-->>API: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
    API-->>FE: JWT Token
    FE-->>U: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤º
```

### é–¢é€£è¦ä»¶
- FR-001: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼
- FR-002: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
````

## ä¾å­˜é–¢ä¿‚

**ä¾å­˜å…ƒ**: CMD-001
**ä¾å­˜å…ˆ**: CMD-007, CMD-008, CMD-009

## é–¢é€£ã‚³ãƒãƒ³ãƒ‰

- [/generate-architecture-diagram](./generate-architecture-diagram.md) (CMD-004)
- [/generate-dataflow-diagram](./generate-dataflow-diagram.md) (CMD-005)

---

## å®Ÿè¡Œæ™‚ã®æŒ‡ç¤ºï¼ˆClaudeå‘ã‘ï¼‰

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹éš›ã€å¿…ãšä»¥ä¸‹ã®GitHub Issueé€£æºã‚’è¡Œã£ã¦ãã ã•ã„ï¼š

### Step 1: SSOT Issueå–å¾—

`.ccagi.yml` ã‹ã‚‰SSOT Issueç•ªå·ã‚’å–å¾—ï¼š

```bash
SSOT_ISSUE=$(grep 'issue_number' .ccagi.yml 2>/dev/null | awk '{print $2}')
PHASE2_ISSUE=$(grep 'phase2' .ccagi.yml 2>/dev/null | awk '{print $2}')
```

### Step 2: Phase 2 ä½œæ¥­ç”¨Issueä½œæˆï¼ˆå­˜åœ¨ã—ãªã„å ´åˆï¼‰

Phase 2 IssueãŒå­˜åœ¨ã—ãªã„å ´åˆã€**å¿…ãš**ä½œæˆï¼š

```bash
if [ -z "$PHASE2_ISSUE" ] && [ -n "$SSOT_ISSUE" ]; then
  PHASE2_ISSUE=$(gh issue create \
    --title "ğŸ¨ Phase 2: è¨­è¨ˆ - #${SSOT_ISSUE}" \
    --body "$(cat <<EOF
è¦ªIssue: #${SSOT_ISSUE}

## ğŸ¨ Phase 2: Design

è¨­è¨ˆãƒ•ã‚§ãƒ¼ã‚ºã®ä½œæ¥­ã‚’ç®¡ç†ã—ã¾ã™ã€‚

## ã‚¿ã‚¹ã‚¯

- [ ] ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ç”Ÿæˆ (\`/generate-sequence-diagram\`)
- [ ] ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ç”Ÿæˆ (\`/generate-architecture-diagram\`)
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ç”Ÿæˆ (\`/generate-dataflow-diagram\`)

## ç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [sequence.md](./docs/diagrams/sequence.md)
- [architecture.md](./docs/diagrams/architecture.md)
- [dataflow.md](./docs/diagrams/dataflow.md)

## ä¾å­˜é–¢ä¿‚

- **ä¾å­˜å…ƒ**: Phase 1 (Requirements)
- **ä¾å­˜å…ˆ**: Phase 3 (Planning)

---
ğŸ¤– Generated by CCAGI SDK
EOF
)" \
    --label "phase:design,ğŸ¤– automated" | grep -oE '[0-9]+$')

  echo "Phase 2 Issue #${PHASE2_ISSUE} ã‚’ä½œæˆã—ã¾ã—ãŸ"

  # .ccagi.yml ã«è¨˜éŒ²
  echo "  phase2: ${PHASE2_ISSUE}" >> .ccagi.yml

  # SSOT Issueã«ã‚³ãƒ¡ãƒ³ãƒˆ
  gh issue comment ${SSOT_ISSUE} --body "## ğŸ¨ Phase 2: Design é–‹å§‹

Phase 2 Issue: #${PHASE2_ISSUE}

é–‹å§‹æ™‚åˆ»: $(date '+%Y-%m-%d %H:%M:%S')
"
fi
```

### Step 3: ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ç”Ÿæˆå¾Œã®Issueæ›´æ–°

ç”Ÿæˆå®Œäº†å¾Œã€**å¿…ãš**Phase 2 Issueã‚’æ›´æ–°ï¼š

```bash
if [ -n "$PHASE2_ISSUE" ]; then
  gh issue comment ${PHASE2_ISSUE} --body "## âœ… ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ç”Ÿæˆå®Œäº†

å®Œäº†æ™‚åˆ»: $(date '+%Y-%m-%d %H:%M:%S')

### ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«
- [sequence.md](./docs/diagrams/sequence.md)

### ã‚µãƒãƒªãƒ¼
- å›³æ•°: XX
- ã‚«ãƒãƒ¬ãƒƒã‚¸: 100%
"
fi
```

### Step 4: å…¨Phase 2ã‚³ãƒãƒ³ãƒ‰å®Œäº†æ™‚

å…¨ã¦ã®Phase 2ã‚³ãƒãƒ³ãƒ‰ï¼ˆã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ï¼‰ãŒå®Œäº†ã—ãŸã‚‰ï¼š

```bash
# Phase 2 Issueã‚’ã‚¯ãƒ­ãƒ¼ã‚º
gh issue close ${PHASE2_ISSUE} --comment "âœ… Phase 2 å®Œäº† - å…¨è¨­è¨ˆå›³ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸ"

# SSOT Issueã‚’æ›´æ–°
gh issue comment ${SSOT_ISSUE} --body "## âœ… Phase 2: Design å®Œäº†

å®Œäº†æ™‚åˆ»: $(date '+%Y-%m-%d %H:%M:%S')

### ç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [sequence.md](./docs/diagrams/sequence.md)
- [architecture.md](./docs/diagrams/architecture.md)
- [dataflow.md](./docs/diagrams/dataflow.md)

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
\`/plan-project\` ã‚’å®Ÿè¡Œã—ã¦Phase 3ã‚’é–‹å§‹
"
```

### Step 5: å®Œäº†å ±å‘Š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ä»¥ä¸‹ã‚’å ±å‘Šï¼š
- ç”Ÿæˆã•ã‚ŒãŸã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ä¸€è¦§
- **Phase 2 Issue URL**
- **SSOT Issue URL**
- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

---

ğŸ¤– CCAGI SDK v6.21.5 - Phase 2: Design (CMD-003)
